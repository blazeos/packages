#!/bin/sh
set -e

PACKAGE=$1
VERSION=${2:-"stable"}

CACHE_DIR="/Programs/blazeos/cache"
BUILD_DIR="/Programs/blazeos/build"

if [ ! -d "/Programs/blazeos/software/$PACKAGE/$VERSION" ]; then
  echo "Package $PACKAGE ($VERSION) does not exist. Please check your spelling."
fi

source /Programs/blazeos/software/$PACKAGE/$VERSION/build

rm -rf "$BUILD_DIR/*"

if [ ! -f "$CACHE_DIR/$FILENAME" ]; then
  echo "Downloading $NAME..."
  wget -O "$CACHE_DIR/$FILENAME" "$SOURCE"
  #VERIFY CHECKSUM!!
fi

echo "Compiling $NAME..."
build

echo "Installing $NAME..."
install

echo "Cleaning up build directory..."
#rm -rf "$BUILD_DIR/*"
